<html>

<head>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/formio.full.min.css">
  <link rel="stylesheet" href="css/app.css">
  <script src="js/formio.full.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script type="text/javascript">
    window.onload = function () {
      Formio.createForm(document.getElementById('formio'), (function () {
        var json = null;
        $.ajax({
          'async': false,
          'global': false,
          'url': "json/fixedform.json",
          'dataType': "json",
          'success': function (data) {
            json = data;
          }
        });
        return json;
      })()).then(function (form) {
        form.on('submit', (submission) => {
          var url = 'https://togetherdemo.azure-api.net/calc/mul';
          var data = {
            'a': submission.data.a,
            'b': submission.data.b
          }
          $.ajax({
            url: url,
            type: "POST",
            contentType: "application/json",
            data: data,
            dataType: "JSON"
          }).done(function (data) {
            console.log(data);
            form.submission = {
              data: {
                a: data.inputa,
                b: data.inputb,
                output: JSON.stringify(data.result)
              }
            };
            window.setTimeout(function () {
              $(".alert").fadeOut("slow");
            }, 3000);
            console.log(submission);
          }).fail(function (error) {
            form.setAlert('danger', error.statusText);
            console.log(JSON.stringify(error.statusText));
          });
        });
        form.on('submitDone', (submission) => {
          // something present
        });
      });
    };
  </script>
</head>

<body>
  <div class="container-fuild">
    <div class="jumbotron">
      <h1 style="text-align:center"> MULTIPLY FORM</h1>
    </div>
    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-6 col-lg-offset-3" id="formio"></div>
  </div>
</body>

</html>